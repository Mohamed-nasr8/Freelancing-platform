<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Chat Test</title>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/5.0.7/signalr.min.js"></script>
</head>
<body>
    <div>
        <h1>Chat Test</h1>
        <textarea id="message" placeholder="Enter message"></textarea>
        <button onclick="sendMessage()">Send Message</button>
    </div>

    <script>
        // Connect to the ChatHub
        var connection = new signalR.HubConnectionBuilder()
            .withUrl("http://localhost:5106/chatHub")
            .build();

        // Handle receiving messages
        connection.on("ReceiveMessage", function(message) {
            console.log("Received message:", message);
            // Display the received message in the chat UI
            // You can update the UI with the received message using any frontend framework or library
        });

        // Start the connection
        connection.start()
            .then(function() {
                // Connection started
                console.log("Connection started");
            })
            .catch(function(error) {
                // Failed to start connection
                console.error("Connection error:", error);
            });

        // Send a message from the client to the freelancer
        function sendMessage() {
            var clientId = 1;
            var freelancerId = 1;
            var messageContent = document.getElementById("message").value;

            connection.invoke("SendClientMessage", clientId, freelancerId, messageContent)
                .then(function() {
                    // Message sent successfully
                    console.log("Message sent");
                })
                .catch(function(error) {
                    // Failed to send message
                    console.error("Message error:", error);
                });
        }
    </script>
</body>
</html>
